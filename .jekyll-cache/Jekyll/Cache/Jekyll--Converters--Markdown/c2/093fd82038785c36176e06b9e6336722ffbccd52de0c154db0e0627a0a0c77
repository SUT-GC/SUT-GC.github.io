I"ÔJ<ul class="toc" id="markdown-toc">
  <li><a href="#heading-èƒŒæ™¯" id="markdown-toc-heading-èƒŒæ™¯">èƒŒæ™¯</a></li>
  <li><a href="#heading-æµç¨‹å›¾" id="markdown-toc-heading-æµç¨‹å›¾">æµç¨‹å›¾</a></li>
  <li><a href="#heading-startsh" id="markdown-toc-heading-startsh">start.sh</a></li>
  <li><a href="#heading-dockerfile" id="markdown-toc-heading-dockerfile">DockerFile</a></li>
  <li><a href="#heading-ä¸è¶³" id="markdown-toc-heading-ä¸è¶³">ä¸è¶³</a></li>
</ul>

<h1 id="heading-èƒŒæ™¯">èƒŒæ™¯</h1>

<p>ä»Šå¤©è¯´çš„è¿™ä¸ªä¸œè¥¿ä¹Ÿæ˜¯æˆ‘æ¥è§¦Dockerçš„åŸå› ï¼Œå½“åˆæ¥è§¦Dockerä¸æ˜¯ä¸ºäº†æä»€ä¹ˆDockeré›†ç¾¤ï¼Œä¸æ˜¯ä¸ºäº†å°†æœåŠ¡å™¨DockeråŒ–ï¼Œ ä»…ä»…æ˜¯ä¸ºäº†åšä¸€ä¸ªç®€å•çš„Pythonçš„å‘å¸ƒç³»ç»Ÿ</p>

<p>ç°åœ¨æœ‰ä¸€ä¸ªPythonçš„é¡¹ç›®Rogerï¼Œéå®˜æ–¹çš„ï¼Œä¸ºäº†åœ¨å‘å¸ƒä»£ç æµç¨‹ä¸Šåšå·æ‡’ï¼Œæ‰€ä»¥æƒ³æŠŠå‘å¸ƒæµç¨‹è‡ªåŠ¨åŒ–ï¼Œè‡ªåŠ¨åˆ°ä»€ä¹ˆç¨‹åº¦å‘¢ï¼š æ¯æ¬¡å°†ä»£ç pushæˆ–è€…mergeåˆ°githubçš„masterçš„æ—¶å€™ï¼ŒæœåŠ¡å™¨è‡ªåŠ¨æ›´æ–°ä»£ç ï¼Œè¿è¡Œæ–°ä»£ç ã€‚</p>

<p>å¦‚æœä¸è‡ªåŠ¨åŒ–ä¼šæ€ä¹ˆæ ·? çœ‹æ®µä¼ªä»£ç </p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>å¼€å‘æ–°ä»£ç ;

æœ¬åœ°æµ‹è¯•é€šè¿‡;

if æ²¡æœ‰ä¾èµ–æ›´æ–°:
    ç”¨fcpæˆ–è€…sfcpå‘½ä»¤å°†ä»£ç æ‹·è´åˆ°æœåŠ¡å™¨åˆ¶å®šç›®å½•ä¸‹;
else:
    ç™»é™†æœåŠ¡å™¨;
    åœæ‰æœåŠ¡(å› ä¸ºæ›´æ–°pythonä»£ç å¯èƒ½ä¼šå› ä¸ºæ²¡æœ‰ä¾èµ–æŠ¥é”™);
    ç™»å‡ºæœåŠ¡å™¨;
    ç”¨fcpæˆ–è€…sfcpå‘½ä»¤å°†ä»£ç æ‹·è´åˆ°æœåŠ¡å™¨åˆ¶å®šç›®å½•ä¸‹;
    ç™»é™†æœåŠ¡å™¨;
    æ‰§è¡Œ pip instll -r requirments.txt;
    è¿è¡ŒæœåŠ¡
    
</code></pre></div></div>

<p>æ³¨æ„çš„æ˜¯ï¼Œæ¯æ¬¡æœ‰æ–°çš„åŠŸèƒ½ï¼Œéƒ½è¦è¿™æ ·ä¸åŒå…¶çƒ¦çš„å°½å¿ƒä»£ç â€œå‘å¸ƒâ€, è€Œä¸”æ˜¯æœ¬æ¬¡æµ‹è¯•é€šè¿‡çš„ä»£ç æ”¾åœ¨æœåŠ¡å™¨ä¸Šèƒ½é¡ºåˆ©è¿è¡Œçš„æƒ…å†µä¸‹â€¦â€¦</p>

<p>æˆ‘ä»¬æŠŠä¸€éƒ¨åˆ†æ“ä½œè‡ªåŠ¨åŒ–ä¹‹åä¼šæ˜¯ä»€ä¹ˆæ ·å­å‘¢ï¼Ÿ</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>func è‡ªåŠ¨åŒ–å‘å¸ƒä»£ç å‡½æ•°(){
    å°†ä»£ç git cloneåˆ°tmpç›®å½•;
    æ‰§è¡Œpip install -r requirments.txt;
    cd åˆ°çœŸæ­£æä¾›æœåŠ¡çš„ä»£ç ç›®å½•;
    git pull
}

å¼€å‘æ–°ä»£ç ;

æœ¬åœ°æµ‹è¯•é€šè¿‡;

æ¨é€ä»£ç åˆ°gitlab;

è‡ªåŠ¨åŒ–å‘å¸ƒä»£ç å‡½æ•°(); //è¿™ä¸€æ­¥ä¸éœ€è¦äººä¸ºæ‰§è¡Œï¼Œæ˜¯æ ¹æ®ç›‘å¬gitlabè‡ªåŠ¨æ‰§è¡Œ
</code></pre></div></div>

<p>è¿™æ ·ä¾èµ–ï¼ŒåŸºæœ¬å°±å®ç°è‡ªåŠ¨åŒ–å‘å¸ƒäº†æŠŠï½ è™½ç„¶å¾ˆç®€é™‹ï¼Œä½†æ˜¯å´å¯ä»¥â€œåšæŒâ€ä¸‹å»ï¼Œä¸æ˜¯ä¹ˆï¼Ÿ</p>

<p>ä½†æ˜¯è¿˜æœ‰é—®é¢˜ï¼šå¦‚æœmasterä»£ç æ˜¯é”™è¯¯çš„å‘¢ï¼Ÿ æˆ‘ä»¬æ˜¯ä¸æ˜¯æŠŠå¼‚å¸¸ä»£ç å‘å¸ƒåˆ°æœåŠ¡ä¸Šå»äº†å‘¢ï¼Ÿ ç»“æœå°±æ˜¯æœåŠ¡æ­»æ‰äº†</p>

<p>æœ‰æ²¡æœ‰èƒ½è§£å†³è¿™ä¸ªé—®é¢˜çš„åŠæ³•å‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯ï¼šæœ‰</p>

<p>è™½ç„¶åŒæ ·å¾ˆlowï¼Œ ä½†æ˜¯èƒ½è§£å†³é—®é¢˜å°±æ˜¯å¥½åŠæ³•ï½</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
func è‡ªåŠ¨åŒ–å‘å¸ƒä»£ç å‡½æ•°(){
    å°†ä»£ç æ”¾å…¥ä¸´æ—¶æ–‡ä»¶ä¸­;
    å°†ä»£ç è¿è¡Œåœ¨Dockerä¸Šï¼ˆè®¿é—®ç«¯å£è¦æ¢ä¸€ä¸‹ï¼‰;
    å¯¹è¿™ä¸ªDockeræä¾›çš„â€œæœåŠ¡â€è¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•;
    if æµ‹è¯•æˆåŠŸ:
        ç”¨çœŸæ­£æä¾›æœåŠ¡çš„ç«¯å£å¯åŠ¨Docker;
    else:
        å°†è‡ªåŠ¨åŒ–æµ‹è¯•çš„ç»“æœä»¥å‘å¸ƒæ—¥å¿—çš„å½¢å¼æš´éœ²å‡ºæ¥;
}

å¼€å‘æ–°ä»£ç ;

æœ¬åœ°æµ‹è¯•é€šè¿‡;

æ¨é€ä»£ç åˆ°gitlab;

è‡ªåŠ¨åŒ–å‘å¸ƒä»£ç å‡½æ•°();

</code></pre></div></div>

<p>è¿™ä¸ªæµç¨‹ä¸‹æ¥ï¼Œæ˜¯ä¸æ˜¯æ›´å¥½ä¸€ç‚¹äº†å‘¢ï¼Ÿ æ‰€ä»¥ï¼Œä¸ºäº†å®ç°è¿™ä¸ªç®€æ˜“çš„è‡ªåŠ¨åŒ–å‘å¸ƒæµç¨‹ï¼Œæˆ‘å†³å®šå­¦ä¹ Dockerï½ï½ï½</p>
<h1 id="heading-æµç¨‹å›¾">æµç¨‹å›¾</h1>

<p><img src="/files/images/roger%E4%BB%A3%E7%A0%81%E5%8F%91%E5%B8%83%E7%B3%BB%E7%BB%9F%E6%B5%81%E7%A8%8B%E5%9B%BE.png" alt="img1" /></p>

<p>ç»“åˆæµç¨‹å›¾ä¸­çš„æµç¨‹ï¼Œ è¯´ä¸€ä¸‹è¿™ä¸ªä¸œè¥¿å¼€å‘çš„å¤§è‡´æµç¨‹:</p>

<ul>
  <li>å¼€å‘è€…åœ¨éMasteråˆ†æ”¯ä¸Šç¼–å†™ä»£ç </li>
  <li>ç¼–å†™æˆåŠŸåï¼Œæµ‹è¯•</li>
  <li>æµ‹è¯•æˆåŠŸåMergeä»£ç åˆ°Master</li>
  <li>è§¦å‘jekinsï¼Œæ‹‰Masterä»£ç ï¼Œè¿è¡Œstart.sh buildé•œåƒ</li>
  <li>Dockerä½¿ç”¨éçº¿ä¸Šç«¯å£å¯åŠ¨è¯¥é•œåƒ</li>
  <li>ä½¿ç”¨å‡†å¤‡å¥½çš„è„šæœ¬å¯¹æ”¹é•œåƒè¿›è¡Œæµ‹è¯•</li>
  <li>æµ‹è¯•é€šè¿‡å å°†çº¿ä¸Šæ­£åœ¨è¿è¡Œçš„æœºå™¨åœæ‰ï¼Œ ç„¶åç”¨çº¿ä¸Šç«¯å£å¯åŠ¨è¯¥é•œåƒ</li>
</ul>

<h1 id="heading-startsh">start.sh</h1>

<p>è¿™ä¸ª</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="nv">PROJECT_DIR</span><span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>
<span class="nv">PROJECT_PORT</span><span class="o">=</span>8888
<span class="nv">DOCKER_FILE</span><span class="o">=</span><span class="k">${</span><span class="nv">PROJECT_DIR</span><span class="k">}</span>/Dcokerfile
<span class="nv">HOST_FILE</span><span class="o">=</span><span class="nv">$1</span>
<span class="nv">DOCKER_FILE</span><span class="o">=</span><span class="nv">$2</span>
<span class="nv">DOCKER_SERVER_VERSION</span><span class="o">=</span><span class="sb">`</span><span class="nb">date</span> +%s<span class="sb">`</span>
<span class="nv">DOCKER_SERVER_TAG</span><span class="o">=</span>rmb-data/roger-server:<span class="k">${</span><span class="nv">DOCKER_SERVER_VERSION</span><span class="k">}</span>
<span class="nv">DOCKER_RUN_PORT</span><span class="o">=</span>8888
<span class="nv">DOCKER_TEST_PORT</span><span class="o">=</span>8889
<span class="nv">DOCKER_RUN_LABEL</span><span class="o">=</span>roger-run
<span class="nv">DOCKER_TEST_LABEL</span><span class="o">=</span>roger-test
<span class="nv">DOCKER_RUN_NAME</span><span class="o">=</span>roger-server
<span class="nv">DOCKER_TEST_NAME</span><span class="o">=</span>roger-test-server

<span class="nb">echo</span> <span class="s2">"HOST_FILE: </span><span class="nv">$HOST_FILE</span><span class="s2">, DOCKER_FILE: </span><span class="nv">$DOCKER_FILE</span><span class="s2">"</span>

<span class="k">function </span>check_cmd_result <span class="o">{</span>
    <span class="k">if</span> <span class="o">[</span> <span class="nv">$1</span> <span class="nt">-eq</span> 0  <span class="o">]</span><span class="p">;</span> <span class="k">then
        </span><span class="nb">echo</span> <span class="s2">"[SUCCESS] </span><span class="nv">$2</span><span class="s2">"</span>
    <span class="k">else
        </span><span class="nb">echo</span> <span class="s2">"[ERROR] </span><span class="nv">$2</span><span class="s2">"</span>
        <span class="nb">exit </span>1
    <span class="k">fi</span>
<span class="o">}</span>

<span class="k">function </span>ping_server_result <span class="o">{</span>
    <span class="nv">PING_RESULT</span><span class="o">=</span><span class="sb">`</span>curl <span class="nt">-s</span>  http://localhost:<span class="k">${</span><span class="nv">DOCKER_TEST_PORT</span><span class="k">}</span>/job/ping<span class="sb">`</span>
    <span class="nb">echo</span> <span class="nv">$PING_RESULT</span>
    <span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$PING_RESULT</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"pong"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
        return </span>0
    <span class="k">else
        return </span>1
    <span class="k">fi</span>
<span class="o">}</span>

<span class="k">function </span>ping_server_result_with_try <span class="o">{</span>
    <span class="nv">test_count</span><span class="o">=</span>1
    <span class="nv">try_count</span><span class="o">=</span>100
    <span class="k">while</span> <span class="o">[</span> <span class="nv">$test_count</span> <span class="nt">-lt</span> <span class="nv">$try_count</span> <span class="o">]</span>
    <span class="k">do
        </span><span class="nb">sleep </span>1
        <span class="nb">echo</span> <span class="s2">"ping </span><span class="nv">$test_count</span><span class="s2"> times...."</span>
        ping_server_result
        <span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> <span class="nt">-eq</span> 0 <span class="o">]</span><span class="p">;</span> <span class="k">then
            </span><span class="nb">echo</span> <span class="s2">"[SUCCESS] ping test"</span>
            <span class="nb">break
        </span><span class="k">else
            </span><span class="nb">echo</span> <span class="s2">"[ERROR] ping test </span><span class="nv">$test_count</span><span class="s2"> times"</span>
        <span class="k">fi
        </span><span class="nv">test_count</span><span class="o">=</span><span class="nv">$[</span> <span class="nv">$test_count</span> + 1 <span class="o">]</span>
    <span class="k">done

    if</span> <span class="o">[[</span> <span class="nv">$test_count</span> <span class="o">==</span>  <span class="nv">$try_count</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
        return </span>1
    <span class="k">else
        return </span>0
    <span class="k">fi</span>
<span class="o">}</span>

<span class="k">function </span>build_server_result_with_try <span class="o">{</span>
    <span class="nv">now_count</span><span class="o">=</span>1
    <span class="nv">max_count</span><span class="o">=</span>4
    <span class="k">while</span> <span class="o">[</span> <span class="nv">$now_count</span> <span class="nt">-lt</span> <span class="nv">$max_count</span> <span class="o">]</span>
    <span class="k">do
        </span><span class="nb">sleep </span>1
        <span class="nb">echo</span> <span class="s2">"start build docker image </span><span class="k">${</span><span class="nv">DOCKER_SERVER_TAG</span><span class="k">}</span><span class="s2"> </span><span class="nv">$now_count</span><span class="s2"> times"</span>
        docker build <span class="nt">--label</span> roger-server <span class="nt">-t</span> <span class="k">${</span><span class="nv">DOCKER_SERVER_TAG</span><span class="k">}</span> <span class="nb">.</span>
        <span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> <span class="nt">-eq</span> 0 <span class="o">]</span><span class="p">;</span> <span class="k">then
            </span><span class="nb">echo</span> <span class="s2">"[SUCCESS] build images </span><span class="nv">$now_count</span><span class="s2"> times"</span>
            <span class="nb">break
        </span><span class="k">else
            </span><span class="nb">echo</span> <span class="s2">"[ERROR] build images </span><span class="nv">$now_count</span><span class="s2"> times"</span>
        <span class="k">fi
        </span><span class="nv">now_count</span><span class="o">=</span><span class="nv">$[</span> <span class="nv">$now_count</span> + 1  <span class="o">]</span>
    <span class="k">done

    if</span> <span class="o">[[</span> <span class="nv">$now_count</span> <span class="o">==</span> <span class="nv">$max_count</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
        return </span>1
    <span class="k">else
        return </span>0
    <span class="k">fi</span>
<span class="o">}</span>

<span class="nb">echo</span> <span class="s2">"into project dir </span><span class="k">${</span><span class="nv">PROJECT_DIR</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">cd</span> <span class="nv">$PROJECT_DIR</span>

<span class="c"># try 3 times to build</span>
build_server_result_with_try
check_cmd_result <span class="nv">$?</span> <span class="s2">"build server images"</span>

<span class="nb">echo</span> <span class="s2">"list docker images..."</span>
docker images

<span class="nb">echo</span> <span class="s2">"clear test server container </span><span class="k">${</span><span class="nv">DOCKER_TEST_NAME</span><span class="k">}</span><span class="s2">..."</span>
docker stop <span class="si">$(</span>docker ps <span class="nt">-q</span> <span class="nt">-f</span> <span class="nv">name</span><span class="o">=</span><span class="k">${</span><span class="nv">DOCKER_TEST_NAME</span><span class="k">}</span><span class="si">)</span>
docker <span class="nb">rm</span> <span class="si">$(</span>docker ps <span class="nt">-a</span> <span class="nt">-q</span> <span class="nt">-f</span> <span class="nv">name</span><span class="o">=</span><span class="k">${</span><span class="nv">DOCKER_TEST_NAME</span><span class="k">}</span><span class="si">)</span>

<span class="nb">echo</span> <span class="s2">"start run test server </span><span class="k">${</span><span class="nv">DOCKER_SERVER_TAG</span><span class="k">}</span><span class="s2">..."</span>
docker run <span class="nt">-d</span> <span class="nt">-p</span> <span class="k">${</span><span class="nv">DOCKER_TEST_PORT</span><span class="k">}</span>:<span class="k">${</span><span class="nv">PROJECT_PORT</span><span class="k">}</span> <span class="nt">-v</span> <span class="k">${</span><span class="nv">HOST_FILE</span><span class="k">}</span>:<span class="k">${</span><span class="nv">DOCKER_FILE</span><span class="k">}</span>  <span class="nt">--name</span> <span class="k">${</span><span class="nv">DOCKER_TEST_NAME</span><span class="k">}</span>  <span class="k">${</span><span class="nv">DOCKER_SERVER_TAG</span><span class="k">}</span>
check_cmd_result <span class="nv">$?</span> <span class="s2">"run test server"</span>

<span class="c"># ping test 100 times, if all fail, error.</span>
<span class="nb">echo</span> <span class="s2">"start ping server...."</span>
ping_server_result_with_try
check_cmd_result <span class="nv">$?</span> <span class="s2">"ping test server"</span>

<span class="nb">echo</span> <span class="s2">"stop and remove test server container </span><span class="k">${</span><span class="nv">DOCKER_TEST_NAME</span><span class="k">}</span><span class="s2">..."</span>
docker stop <span class="si">$(</span>docker ps <span class="nt">-q</span> <span class="nt">-f</span> <span class="nv">name</span><span class="o">=</span><span class="k">${</span><span class="nv">DOCKER_TEST_NAME</span><span class="k">}</span><span class="si">)</span>
docker <span class="nb">rm</span> <span class="si">$(</span>docker ps <span class="nt">-a</span> <span class="nt">-q</span> <span class="nt">-f</span> <span class="nv">name</span><span class="o">=</span><span class="k">${</span><span class="nv">DOCKER_TEST_NAME</span><span class="k">}</span><span class="si">)</span>
check_cmd_result <span class="nv">$?</span> <span class="s2">"stop and remove test server container"</span>

<span class="nb">echo</span> <span class="s2">"stop and remove the old run server container  by name=</span><span class="k">${</span><span class="nv">DOCKER_RUN_NAME</span><span class="k">}</span><span class="s2">"</span>
docker stop <span class="si">$(</span>docker ps <span class="nt">-q</span> <span class="nt">-f</span> <span class="nv">name</span><span class="o">=</span><span class="k">${</span><span class="nv">DOCKER_RUN_NAME</span><span class="k">}</span><span class="si">)</span>
docker <span class="nb">rm</span> <span class="si">$(</span>docker ps <span class="nt">-a</span> <span class="nt">-q</span> <span class="nt">-f</span> <span class="nv">name</span><span class="o">=</span><span class="k">${</span><span class="nv">DOCKER_RUN_NAME</span><span class="k">}</span><span class="si">)</span>
docker rmi <span class="si">$(</span>docker images <span class="nt">-q</span> <span class="nt">-f</span> <span class="nv">dangling</span><span class="o">=</span><span class="nb">true</span><span class="si">)</span>

<span class="nb">echo</span> <span class="s2">"start run server by name=</span><span class="k">${</span><span class="nv">DOCKER_RUN_NAME</span><span class="k">}</span><span class="s2">..."</span>
docker run <span class="nt">-d</span> <span class="nt">-p</span> <span class="k">${</span><span class="nv">DOCKER_RUN_PORT</span><span class="k">}</span>:<span class="k">${</span><span class="nv">PROJECT_PORT</span><span class="k">}</span> <span class="nt">-v</span> <span class="k">${</span><span class="nv">HOST_FILE</span><span class="k">}</span>:<span class="k">${</span><span class="nv">DOCKER_FILE</span><span class="k">}</span>  <span class="nt">--name</span> <span class="k">${</span><span class="nv">DOCKER_RUN_NAME</span><span class="k">}</span>  <span class="k">${</span><span class="nv">DOCKER_SERVER_TAG</span><span class="k">}</span>
check_cmd_result <span class="nv">$?</span> <span class="s2">"run roger-server ..."</span>

<span class="nb">echo</span> <span class="s2">"pring docker ps"</span>
docker ps

<span class="nb">echo</span> <span class="s2">"--------------------------------"</span>
<span class="nb">echo</span> <span class="s2">"---FINISH START ROGER-SERVER---"</span>
<span class="nb">echo</span> <span class="s2">"--------------------------------"</span>

</code></pre></div></div>

<p>è¿™é‡ŒåŠ å…¥äº†äº›é‡è¯•çš„æœºåˆ¶ï¼Œ æ¯”å¦‚åœ¨ build Dockerfileçš„æ—¶å€™ï¼Œ ä¼šå› ä¸ºç½‘ç»œåŸå› æ‹‰åŒ…å¼‚å¸¸ï¼Œ æ‰€ä»¥é‡è¯•äº†ä¸‰æ¬¡</p>

<h1 id="heading-dockerfile">DockerFile</h1>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># åŸºæœ¬é•œåƒ python3.4.5 + ubuntu </span>
FROM daocloud.io/library/python:3.4.5-wheezy
<span class="c"># æ‹·è´é¡¹ç›®æ–‡ä»¶åˆ°å®¹å™¨ /root ç›®å½•ä¸‹</span>
COPY <span class="nb">.</span> /root/
<span class="c"># è®¾ç½®ç¯å¢ƒå˜é‡</span>
ENV <span class="nv">PYTHONPATH</span><span class="o">=</span>/root/
<span class="c"># è®¾ç½®å·¥ä½œç›®å½•</span>
WORKDIR /root/
<span class="c"># è¿è¡Œå‘½ä»¤ï¼Œå®‰è£…ç›¸å…³ä¾èµ–</span>
RUN <span class="nb">pwd</span> <span class="se">\</span>
    <span class="o">&amp;&amp;</span> <span class="nb">ls</span> <span class="se">\</span>
    <span class="o">&amp;&amp;</span> pip <span class="nb">install</span> <span class="nt">-r</span> requirements.txt <span class="nt">-i</span> https://pypi.douban.com/simple

<span class="c"># å¯åŠ¨é¡¹ç›®</span>
CMD python3 bin/run.py

</code></pre></div></div>

<p>è¿™é‡Œçš„DockerFileå…¶å®å¾ˆç®€å•ï¼Œ å®‰è£…pythonä¾èµ–ï¼Œ Copyä»£ç (DockerFile æ˜¯æ”¾åœ¨ä»£ç æ ¹ç›®å½•ä¸‹çš„), è®¾ç½®å·¥ä½œç›®å½•ï¼Œ å®‰è£…pythonä¾èµ–ï¼Œ</p>

<h1 id="heading-ä¸è¶³">ä¸è¶³</h1>

<p>è¿™ä¸ªåªæ˜¯ä¸ªç®€æ˜“çš„å‘å¸ƒç³»ç»Ÿï¼Œ ä»…ä»…åšäº†ä»£ç å¸¦çº¿ä¸Šçš„å‘å¸ƒï¼Œ å…¶å®ä¸­é—´æœ‰å¾ˆå¤šç¼ºç‚¹ï¼Œ ä¹Ÿæœ‰å¾ˆå¤šå¯ä»¥åšçš„åœ°æ–¹ã€‚ã€‚ã€‚</p>

<ul>
  <li>æµ‹è¯•ç¯å¢ƒ</li>
</ul>

<p>æµ‹è¯•ç¯å¢ƒæ˜¯å¿…ä¸å¯å°‘çš„ç¯å¢ƒï¼Œ å› ä¸ºæˆ‘ä»¬å¼€å‘å’Œæµ‹è¯•æ˜¯åˆ†å¼€çš„ï¼Œ å¼€å‘å®Œä¹‹åæŠŠä»£ç å‘å¸ƒåˆ°æµ‹è¯•ç¯å¢ƒï¼Œ æµ‹è¯•æˆåŠŸä¹‹åæ‰èƒ½å‘å¸ƒä¸Šçº¿ã€‚</p>

<ul>
  <li>åˆ†æ”¯å‘å¸ƒ</li>
</ul>

<p>æ¯”å¦‚æƒ³è¦æŠŠæŸä¸ªåˆ†æ”¯å‘å¸ƒåˆ°çº¿ä¸Šï¼Œè€Œä¸æ˜¯å‘å¸ƒmasterï¼Œè¿™ç§æ›´çµæ´»çš„æ“ä½œæ€§ï¼Œ è¦å¥½å¥½è€ƒè™‘è€ƒè™‘</p>

<ul>
  <li>å®¹å™¨æ§åˆ¶å°</li>
</ul>

<p>ä¸€äº›å…¶ä»–å¼€æºè½¯ä»¶ä¾¿å¯ä»¥ä½¿ç”¨</p>

<ul>
  <li>é›†ç¾¤å‘å¸ƒ</li>
</ul>

<p>è¿™ä¸ªå¾ˆé‡è¦ï¼Œ æ¯•ç«Ÿé›†ç¾¤æ˜¯ä¸€ä¸ªå…¬å¸å¿…é¡»å…·å¤‡çš„ï¼Œ å°±ç®—ä¸¤ä¸‰å°æœºå™¨ï¼Œ ä¸ºäº†å¯ç”¨æ€§ï¼Œ ä¹Ÿè¦åšé›†ç¾¤å‘å¸ƒï¼Œ  å¦‚æœä¸€å°ä¸€å°çš„å‘å¸ƒï¼Œ å¦‚ä½• ä¸€å¹¶å‘å¸ƒåˆ°çº¿ä¸Šï¼Œ éƒ½æ˜¯éœ€è¦è€ƒè™‘çš„ã€‚</p>

<ul>
  <li>å‘å¸ƒçŠ¶æ€è§¦è¾¾</li>
</ul>

<p>è¿™ä¸ªç”¨jekinså°±å¤Ÿäº†ï¼Œ å½“ç„¶ä¹Ÿå¯ä»¥åŒ…è£…ä¸€ä¸‹</p>
:ET